<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Default fonts with emacsclient/emacs --daemon | HeyRod.com</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/hjs/railscasts.min.css"><style></style></head><body role="document"><nav class="navbar navbar-inverse" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">HeyRod.com</a></div><div  id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/"><i class='fa fa-home'></i>&nbsp;&nbsp;Home</a></li><li><a href="/projects/"><i class='fa fa-briefcase'></i>&nbsp;&nbsp;Projects</a></li><li><a href="/articles/"><i class='fa fa-book'></i>&nbsp;&nbsp;Articles</a></li><li class="active"><a href="/snippets/"><i class='fa fa-hashtag'></i>&nbsp;&nbsp;Snippets <span class="sr-only">(current)</span></a></li></ul></div></div></nav><div class="wrapper"><div class="main-container"><div class="container"><div class="row"><div class="col-md-2 text-center"><a href="/"><img src="/img/rod-fc-circle-on-white-200x200.png" height="100" width="100"></a><br>&nbsp;<br>Rodney Waldhoff<br><a href="http://heyrod.com/"><i class="fa fa-cloud"></i> HeyRod.com</a><br><a href="mailto:rwaldhoff+heyrod.com@gmail.com"><i class="fa fa-envelope"></i>  Email</a><br>&nbsp;<br><a href="https://github.com/rodw/"><i class="fa fa-github-alt"></i> GitHub</a><br><a href="http://stackoverflow.com/users/1225825/rod"><i class="fa fa-stack-overflow"></i> StackOverflow</a><br><a href="https://www.linkedin.com/in/rwald"><i class="fa fa-linkedin"></i> LinkedIn</a><br>&nbsp;</div><div class="col-md-10"><div class="row snippet-title"><div class="col-sm-12 text-right snippet-title-right"><div class="text-right snippet-title-link"><a href="/snippets">Snippets</a> are tiny notes I've collected for easy reference.</div></div></div><div><div class="row"><div class="col-sm-12 snippet"><div class="permalink"><a href="/snippets/emacsclient-daemon-default-font.html" title="permalink for this snippet"><i class="fa fa-link"></i></a></div><h1 id="default-fonts-with-emacsclient-emacs-daemon">Default fonts with emacsclient/emacs --daemon</h1>
<p>I&#39;ve been using <code>set-default-font</code> in my <code>.emacs</code> file to configure emacs to use my favorite programming font.</p>
<pre><code>(set-default-font &quot;Droid Sans Mono Slashed-10&quot;) ;;; set default font
</code></pre><p>I use <code>emacs --daemon</code> to keep an instance of emacs running as a background process on my development machine so that I can run <code>emacsclient</code> to call up an emacs window (frame) instantaneously (and keep the same session running even after a close the emacs frame).</p>
<p>Suddenly (after an <code>aptitude safe-upgrade</code>, I think, but I&#39;m not sure what triggered this change), emacs frames that are created by <code>emacsclient</code> connecting to the <code>emacs --daemon</code> instance no longer used my default font when initially opened. The default font worked properly for stand-alone emacs instances (opened with <code>emacs</code>), and for <code>emacsclient</code>, executing <code>(set-default-font)</code> after startup worked fine, but it no longer worked automatically.</p>
<p>To fix this, I had to set up a <code>default-frame-alist</code>, which I believe defines commands to execute whenever a new frame is opened.</p>
<pre><code>(set-default-font &quot;Droid Sans Mono Slashed-10&quot;) ;;; set default font
(setq default-frame-alist &#39;((font . &quot;Droid Sans Mono Slashed-10&quot;))) ;;; set default font for emacs --daemon / emacsclient
</code></pre><p>By the way, I also discovered the <code>describe-font</code> elisp function while trying to diagnose this issue.</p>
<pre><code>(describe-font &quot;Droid Sans Mono Slashed-10&quot;)
;; or M-x describe-font &lt;RETURN&gt; Droid Sans Mono Slashed-10 &lt;RETURN&gt;
</code></pre><p>which opens a <code>*Help*</code> buffer containing:</p>
<pre><code>name (opened by): -unknown-Droid Sans Mono Slashed-normal-normal-normal-*-13-*-*-*-m-0-iso10646-1
       full name: Droid Sans Mono Slashed:pixelsize=13:foundry=unknown:weight=normal:slant=normal:width=normal:spacing=100:scalable=true
            size: 13
          height: 17
 baseline-offset:  0
relative-compose:  0
</code></pre><div class="pubdate">Published 11 May 2013</div><div class="tags">Tagged <a href="tag-emacs.html">emacs</a> and <a href="tag-elisp.html">elisp</a>.</div></div></div><br>&nbsp;</br></div><div class="row"><div class="col-sm-12 text-right snippet-title-right"><div class="text-right snippet-title-link"><a href="/snippets">Snippets</a> are tiny notes I've collected for easy reference.</div></div></div></div></div></div></div></div><hr style="width:100%"><div class="container"><div class="row"><div class="col-md-4 text-muted">This page was generated at 9:41 PM on 10 Dec 2015.</div><div class="col-md-4 text-muted text-center"><a href="http://heyrod.com/">HeyRod.com</a></div><div class="col-md-4 text-muted text-right">Copyright &copy; 1999 - 2015 Rodney Waldhoff.</div><br>&nbsp;</div></div><script src="/js/bootstrap.min.js"></script><script src="/js/ugly.js"></script><script src="/js/highlight.min.js"></script></body></html>