<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>3 javascript snippets</title>
	
	<meta name="author" content="rod">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="/css/skeleton-all-min.css">
	<link rel="stylesheet" href="/css/style.css">
  
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  
  <link rel="icon" type="image/svg+xml" href="img/braindump-mod.svg"/>
	<link rel="alternate shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="img/braindump-57x57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/braindump-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/braindump-114x114.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/braindump-144x144.png">
  <link rel="apple-touch-startup-image" sizes="320x460" href="img/startup-320x460.png">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34329491-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>
    
  

  <nav id="primary">
    <div class="container">
      <div class="fourteen columns offset-by-two">
        <ul>
          
            
            
            <li class="" >
              <a class="" href="/">Home</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/project">Projects</a>
            </li>
          
            
            
              
            
            <li class="active" >
              <a class="active" href="/snippet">Snippets</a>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>
  
  

  <div id="main">
    <div class="container">

      

      <div class="three columns align-center">
        <div style="margin-top:50px;"><a href="/"><img src="/img/braindump-64x64.png" height="64" width="64"></a></div>
        <div class="mtop"><a href="/" class="nobr nou" style="color:#555;"><b>Rodney Waldhoff</b></a></div>
        <ul class="mtop">
          <li><a class="flatbutton" href="https://github.com/rodw"><img style="vertical-align:middle; float:left;" src="/img/octocat-24x24.png" height="24" width="24"><span class="float-right">GitHub</span></a></li>
          <li><a class="flatbutton" href="http://www.linkedin.com/in/rwald"><img style="vertical-align:middle; float:left;" src="/img/linkedin-24x24.png" height="24" width="24"><span class="float-right">LinkedIn</span></a></a></li>
        </ul>
      </div>

      

      

      
        <div class="thirteen columns">
          <div id="page-header" class="half-bottom mtop">
            
              <h1 class=" remove-bottom">3 javascript snippets</h1>
            
            <div class="page-class remove-bottom">
              
                  <a href="/snippet">Snippets</a> are tiny notes I've collected for easy reference.
                
            </div>
          </div>
          
        </div>
      

      

      <div class="thirteen columns bulleted">
        
  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/argv-underscore-in-optimist.html">
        <h2 class="half-bottom">In node-optimist, `argv._` is an array of the "extra" parameters</h2>
      </a>
    
    <div>
      <p>In substack&rsquo;s <a href="https://github.com/substack/node-optimist">node-optimist</a>, you can use <code>argv._</code> to fetch any parameters remaining after optimist has done it&rsquo;s parsing.</p>

<p>For example (in CoffeeScript):</p>

<div class="highlight"><pre><code class="coffeescript"><span class="c1"># file: example.coffee</span>
<span class="nv">optimist = </span><span class="nx">require</span> <span class="s">&#39;optimist&#39;</span>
<span class="nv">options = </span><span class="p">{</span>
  <span class="s">&#39;help&#39;</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">description</span><span class="o">:</span><span class="s">&#39;Show this message and exit.&quot;, boolean:true , alias:&#39;</span><span class="nx">h</span><span class="s">&#39; }</span>
<span class="s">}</span>
<span class="s">argv = optimist.usage(&#39;</span><span class="nv">Usage: </span><span class="nx">$0</span> <span class="p">[</span><span class="o">--</span><span class="nx">help</span><span class="p">]</span><span class="s">&#39;, options).argv</span>

<span class="s"># Now argv._ contains an array &quot;extra&quot; parameters, if any</span>
<span class="s">console.log argv._</span>
</code></pre>
</div>


<p>For example</p>

<div class="highlight"><pre><code class="console"><span class="go">coffee example.coffee --help</span>
</code></pre>
</div>


<p>yields</p>

<div class="highlight"><pre><code class="javascript"><span class="p">[</span> <span class="p">]</span>
</code></pre>
</div>


<p>but either of</p>

<div class="highlight"><pre><code class="console"><span class="go">coffee example.coffee --help foo.txt bar.png</span>
</code></pre>
</div>


<p>or</p>

<div class="highlight"><pre><code class="console"><span class="go">coffee example.coffee foo.txt bar.png</span>
</code></pre>
</div>


<p>yield</p>

<div class="highlight"><pre><code class="javascript"><span class="p">[</span> <span class="s1">&#39;foo.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;bar.png&#39;</span> <span class="p">]</span>
</code></pre>
</div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/node-js.html">node.js</a>, <a href="/snippet/t/javascript.html">javascript</a>, <a href="/snippet/t/coffeescript.html">coffeescript</a> and <a href="/snippet/t/node-optimist.html">node-optimist</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/argf-for-nodejs.html">
        <h2 class="half-bottom">Ruby-like ARGF for Node.js</h2>
      </a>
    
    <div>
      <p>tokuhirom&rsquo;s <a href="https://github.com/tokuhirom/node-argf">node-argf</a> module offers a Ruby-like ARGF for Node.js.</p>

<p>Install via:</p>

<div class="highlight"><pre><code class="console"><span class="go">npm install argf</span>
</code></pre>
</div>


<p>or by adding</p>

<div class="highlight"><pre><code class="json"><span class="p">{</span> 
  <span class="err">...</span>
  <span class="nt">&quot;dependencies&quot;</span> <span class="p">:</span> <span class="p">{</span> 
    <span class="err">...</span>
    <span class="nt">&quot;argf&quot;</span> <span class="p">:</span> <span class="s2">&quot;latest&quot;</span> 
  <span class="p">}</span>
  <span class="err">...</span> 
<span class="p">}</span>
</code></pre>
</div>


<p>to your <code>package.json</code> file.</p>

<p>Use ARGF like this:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">ARGF</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;argf&#39;</span><span class="p">);</span>
<span class="nx">argf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ARGF</span><span class="p">();</span>  <span class="c1">// create argf based on current </span>
                    <span class="c1">// command line parameters or </span>
                    <span class="c1">// input streams.</span>
                  
<span class="c1">// register a callback for when all input data has been read</span>
<span class="nx">argf</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Done processing all inputs.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// process the input(s)</span>
<span class="nx">argf</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Read:&quot;</span><span class="p">,</span><span class="nx">line</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;From source:&quot;</span><span class="p">,</span><span class="nx">argv</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>


<p>Like Ruby&rsquo;s <code>ARGF</code>, the module assumes any elements in <code>process.argv</code> represent files to process (and uses the input stream if no files are provided.</p>

<p>You can also pass an array to <code>new ARGF()</code> to provide the list of files, which is handy if you&rsquo;re using something like <a href="https://github.com/substack/node-optimist">node-optimist</a>.  (Note that in node-optimist you can use <code>argv._</code> to get the remaining parameters after parising.)  For example:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">optimist</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;optimist&#39;</span><span class="p">);</span>
<span class="nx">ARGF</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;argf&#39;</span><span class="p">);</span>

<span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="err">#</span> <span class="p">...</span>
<span class="p">}</span>
<span class="nx">argv</span> <span class="o">=</span> <span class="nx">optimist</span><span class="p">.</span><span class="nx">usage</span><span class="p">(</span><span class="s1">&#39;Usage: $0 ...&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">argv</span><span class="p">;</span>

<span class="nx">argf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ARGF</span><span class="p">(</span><span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">);</span>

<span class="nx">argf</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Done processing all inputs.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// process the input(s)</span>
<span class="nx">argf</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Read:&quot;</span><span class="p">,</span><span class="nx">line</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;From source:&quot;</span><span class="p">,</span><span class="nx">argv</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/node-js.html">node.js</a>, <a href="/snippet/t/javascript.html">javascript</a>, <a href="/snippet/t/coffeescript.html">coffeescript</a> and <a href="/snippet/t/ruby.html">ruby</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/rectangles-intersect.html">
        <h2 class="half-bottom">How to determine if two rectangles overlap.</h2>
      </a>
    
    <div>
      

<div class="highlight"><pre><code class="js"><span class="c1">// Assuming that x1,y1 and x2,y2 give the upper left and lower right coordinates of the rectangles (respectively).</span>
<span class="kd">function</span> <span class="nx">rectangles_dont_intersect</span><span class="p">(</span><span class="nx">Ax1</span><span class="p">,</span><span class="nx">Ay1</span><span class="p">,</span><span class="nx">Ax2</span><span class="p">,</span><span class="nx">Ay2</span><span class="p">,</span><span class="nx">Bx1</span><span class="p">,</span><span class="nx">By1</span><span class="p">,</span><span class="nx">Bx2</span><span class="p">,</span><span class="nx">By2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">Ax1</span> <span class="o">&lt;</span> <span class="nx">Bx2</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Ax2</span> <span class="o">&gt;</span> <span class="nx">Bx1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Ay1</span> <span class="o">&lt;</span> <span class="nx">By1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Ay2</span> <span class="o">&gt;</span> <span class="nx">By2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">rectangles_intersect</span><span class="p">(</span><span class="nx">Ax1</span><span class="p">,</span><span class="nx">Ay1</span><span class="p">,</span><span class="nx">Ax2</span><span class="p">,</span><span class="nx">Ay2</span><span class="p">,</span><span class="nx">Bx1</span><span class="p">,</span><span class="nx">By1</span><span class="p">,</span><span class="nx">Bx2</span><span class="p">,</span><span class="nx">By2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nx">rectangles_dont_intersect</span><span class="p">(</span><span class="nx">Ax1</span><span class="p">,</span><span class="nx">Ay1</span><span class="p">,</span><span class="nx">Ax2</span><span class="p">,</span><span class="nx">Ay2</span><span class="p">,</span><span class="nx">Bx1</span><span class="p">,</span><span class="nx">By1</span><span class="p">,</span><span class="nx">Bx2</span><span class="p">,</span><span class="nx">By2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/javascript.html">javascript</a>, <a href="/snippet/t/code.html">code</a> and <a href="/snippet/t/algorithm.html">algorithm</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->



      </div>

    </div>
  </div>

  

  <div id="footer">
    <div class="container">
      <div class="sixteen columns align-center">
        <p class="half-bottom">
          <span class="nobr">rw&#97;ldho<script language="javascript">(function(){var f=function(c) { document.write(String.fromCharCode(c)); }; f(0146); f(0x66); f(0100); })();</script>g&#109;ail&#46;com</span>
          &nbsp;|&nbsp;
          <span class="nobr">(&#55;03) 5&#51;5-6<script language="javascript">document.write("0"); document.write((4-3+1)+"");</script>6</span>
        </p>
        <p class="half-bottom">
          <span class="nobr"><a href="/">heyrod.com</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a class="pointer" onclick="(function(){document.getElementById('caveator').className = (document.getElementById('caveator').className == 'off') ? 'on' : 'off';})(); return false">small print</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a href="/page/colophon.html">credits</a></span>
        </p>
        <p class="half-bottom">&copy; Copyright 2012 Rodney Waldhoff.</p>
        <div id="caveator" class="off">
          <p class="smallprint">
            Except for content that belongs to someone else. Then the copyright belongs to whomever it belongs to.
            The views expressed here are solely my own. They do not reflect in any way those of any institution, organization or group with which I am affiliated. My wife probably disagrees with me too. I can't even promise that <i>I</i> agree with anything you read here.
            Also, I'm not a doctor or a lawyer or really qualified to be giving any advice at all. Ipso facto caveat emptor inter alia. This page was generated at  9:31 PM on 18 October 2012. Tempus fugit.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

