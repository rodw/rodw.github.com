<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>20 linux snippets</title>
	
	<meta name="author" content="rod">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  
  <link rel="icon" type="image/svg+xml" href="img/braindump-mod.svg"/>
	<link rel="alternate shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="img/braindump-57x57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/braindump-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/braindump-114x114.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/braindump-144x144.png">
  <link rel="apple-touch-startup-image" sizes="320x460" href="img/startup-320x460.png">

	<link rel="stylesheet" href="/css/skeleton-all-min.css">
	<link rel="stylesheet" href="/css/style.min.css">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34329491-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>

  

  <nav id="primary">
    <div class="container">
      <div class="fourteen columns offset-by-two">
        <ul>
          
            
            
            <li class="" >
              <a class="" href="/">Home</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/project">Projects</a>
            </li>
          
            
            
              
            
            <li class="active" >
              <a class="active" href="/snippet">Snippets</a>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>

  

  <div id="main">
    <div class="container">

      

      <div class="three columns align-center">
        <div style="margin-top:50px;"><a href="/"><img src="/img/braindump-64x64.png" height="64" width="64"></a></div>
        <div class="mtop"><a href="/" class="nobr nou" style="color:#555;"><b>Rodney Waldhoff</b></a></div>
        <ul class="mtop">
          <li><a class="flatbutton" title="Resume/CV for Rodney Waldhoff (PDF)" href="/img/Waldhoff-Rodney-resume-2014-02.pdf"><img style="vertical-align:middle; float:left;" src="/img/rod-photo-grayscale-24x24.png" height="24" width="24"><span class="float-right">Resume</span></a></li>
          <li><a class="flatbutton" title="github.com/rodw" href="https://github.com/rodw"><img style="vertical-align:middle; float:left;" src="/img/octocat-24x24.png" height="24" width="24"><span class="float-right">GitHub</span></a></li>
          <li><a class="flatbutton" title="Rod @ LinkedIn" href="http://www.linkedin.com/in/rwald"><img style="vertical-align:middle; float:left;" src="/img/linkedin-24x24.png" height="24" width="24"><span class="float-right">LinkedIn</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ StackOverflow" href="http://stackoverflow.com/users/1225825/rod"><img style="vertical-align:middle; float:left;" src="/img/stackoverflow-24x24.png" height="24" width="24"><span class="float-right">SOflow</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ Math.StackExchange" href="http://math.stackexchange.com/users/116929/rod"><img style="vertical-align:middle; float:left;" src="/img/math-stackexchange-24x24.png" height="24" width="24"><span class="float-right">Math@SE</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ TeX.StackExchange" href="http://tex.stackexchange.com/users/37896/rod"><img style="vertical-align:middle; float:left;" src="/img/tex-stackexchange-24x24.png" height="24" width="24"><span class="float-right">TeX@SE</span></a></a></li>
          <li><a class="flatbutton" title="The Graphviz Cookbook" href="http://noumlaut.com/graphviz-cookbook"><img style="vertical-align:middle; float:left;" src="/img/noumlaut-24x24.png" height="24" width="24"><span class="float-right">GV Book</span></a></a></li>
        </ul>
      </div>

      

      

      
        <div class="thirteen columns">
          <div id="page-header" class="half-bottom mtop">
            
              <h1 class=" remove-bottom">20 linux snippets</h1>
            
            <div class="page-class remove-bottom">
              
                  <a href="/snippet">Snippets</a> are tiny notes I've collected for easy reference.
                
            </div>
          </div>
          
        </div>
      

      

      <div class="thirteen columns bulleted">
        
  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/iptables-port-mapping.html">
        <h2 class="half-bottom">Mapping port 80 to port 3000 using iptables</h2>
      </a>
    
    <div>
      <p>Port numbers less that 1024 are considered &ldquo;privileged&rdquo; ports, and you generally must be <code>root</code> to bind a listener to them.</p>

<p>Rather than running a network application as <code>root</code>, map the privileged port to a non-privileged one:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> sudo iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3000
</code></pre></div>


<p>Now requests to port 80 will be forwarded on to port 3000.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/networking.html">networking</a> and <a href="/snippet/t/iptables.html">iptables</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/xwindows-caps-lock-ctrl.html">
        <h2 class="half-bottom">Making CAPS-LOCK into a control key in X</h2>
      </a>
    
    <div>
      <p>Using <code>xmodmap</code>:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> cat ~/.xmodmap
<span class="go">remove Lock = Caps_Lock</span>
<span class="go">keycode 0x42 = Control_L</span>
<span class="go">add Control = Control_L</span>
<span class="gp">$</span> xmodmap ~/.xmodmap
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/graphviz-txlib.html">
        <h2 class="half-bottom">Quickly render DOT (Graphviz) graph</h2>
      </a>
    
    <div>
      <p>On Linux (and probably OSX) the command:</p>

<div class="highlight"><pre><code class="console"><span class="go">dot -Txlib mygraph.gv</span>
</code></pre></div>


<p>will quickly launch a lightweight window containing a <code>dot</code> rendering of the graph in <code>mygraph.gv</code>.</p>

<p>The rendering should automatically refresh when <code>mygraph.gv</code> is updated.  (I&rsquo;ve occassionally run into small glitches with this that force me to re-launch the window, but they are rare and obvious.)</p>

<p>The same <code>-Txlib</code> parameter works for the other Graphviz rendering engines, including <code>neato</code>, <code>twopi</code>, <code>fdp</code>, <code>sfdp</code>, <code>circo</code>, and <code>patchwork</code>.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/graphviz.html">graphviz</a>, <a href="/snippet/t/dot.html">dot</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/toggle-line-wrapping-in-terminal.html">
        <h2 class="half-bottom">Toggle line-wrapping in terminal with `tput rmam` and `tput sram`</h2>
      </a>
    
    <div>
      <p>The command:</p>

<div class="highlight"><pre><code class="console"><span class="go">tput rmam</span>
</code></pre></div>


<p>will disable line wrapping so that long lines are truncated to width of the terminal (<code>$COLUMNS</code>).</p>

<p>The command:</p>

<div class="highlight"><pre><code class="console"><span class="go">tput smam</span>
</code></pre></div>


<p>will re-enable it.</p>

<p>This seems to known as &ldquo;automatic margin&rdquo; mode, hence <code>smam</code> is <code>enter_am_mode</code> and <code>rmam</code> is <code>exit_am_mode</code>.</p>

<p>Some terminals may not support this functionality.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/bash.html">bash</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/less-chop-long-lines.html">
        <h2 class="half-bottom">Use `less -S` for horizontal scrolling</h2>
      </a>
    
    <div>
      <p>The flag <code>-S</code> (or <code>--chop-long-lines</code>) will cause <code>less</code> to truncate lines at the screen (terminal) boundary, rather than wrapping as it does by default.  You can then scroll horizontally (with the arrow keys, for example) to view the full lines when needed.</p>

<div class="highlight"><pre><code class="console"><span class="go">cat some_file_with_very_long_lines | less -S</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/bash.html">bash</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/linux-run-level-cheatsheet.html">
        <h2 class="half-bottom">Cheat Sheet for Linux Run Levels</h2>
      </a>
    
    <div>
      <p>&ldquo;Standard&rdquo; Linux uses the following run levels:</p>

<ul>
<li><strong><em>Run Level 0</em></strong> is halt (shutdown).</li>
<li><strong><em>Run Level 1</em></strong> is single-user mode.</li>
<li><strong><em>Run Level 2</em></strong> is multi-user mode (without networking)</li>
<li><strong><em>Run Level 3</em></strong> is multi-user mode (with networking). This is the normal &ldquo;terminal&rdquo; mode. (I.e., before the display manager is run).</li>
<li><strong><em>Run Level 4</em></strong> is undefined.</li>
<li><strong><em>Run Level 5</em></strong> is multi-usermode with a GUI display manager (X11).</li>
<li><strong><em>Run Level 6</em></strong> is reboot.</li>
</ul>


<p>In Debian and its derivatives run levels 2 thru 5 are the same: multi-user mode with networking, and with a display manager if available.</p>

<ul>
<li><strong><em>Run Level 0</em></strong> is halt (shutdown).</li>
<li><strong><em>Run Level 1</em></strong> is single-user mode.</li>
<li><strong><em>Run Level 2-5</em></strong> is multi-user mode with networking and a GUI display manager when available.</li>
<li><strong><em>Run Level 6</em></strong> is reboot.</li>
</ul>


<p>Debian also adds <strong><em>Run Level S</em></strong>, which is executed when the system first boots.</p>

<p>Also see <a href="http://en.wikipedia.org/wiki/Runlevel">Wikipedia&rsquo;s article on run levels</a>.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/debian.html">debian</a> and <a href="/snippet/t/reference.html">reference</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/disable-services-in-linux.html">
        <h2 class="half-bottom">How to disable services in Debian/Linux</h2>
      </a>
    
    <div>
      <p>The easy way is to install <code>sysv-rc-conf</code>:</p>

<div class="highlight"><pre><code class="console"><span class="go">aptitude install sysv-rc-conf</span>
<span class="go">sysv-rc-conf</span>
</code></pre></div>


<p>Manually, use <code>update-rc.d</code> and specify the run levels, like so:</p>

<div class="highlight"><pre><code class="console"><span class="go">update-rc.d SERVICE_NAME stop 0 1 6 3 . start 2 4 5 .</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a> and <a href="/snippet/t/debian.html">debian</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/how-to-right-align-bash-prompt.html">
        <h2 class="half-bottom">How to right-align text in your bash prompt</h2>
      </a>
    
    <div>
      <h3>Right aligning text by padding with spaces</h3>

<p>To have text in your bash prompt (<code>$PS1</code>) hug the right side of the terminal:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;`printf &quot;%${COLUMNS}s\n&quot; &quot;${TEXT}&quot;`$PS1&quot;</span>
</code></pre></div>


<p>(This assumes you want the right-aligned text to appear before the rest of your prompt, if any.  Move the <code>$PS1</code> bit to the left side of the string to have the right-aligned text appear after the rest of your prompt.)</p>

<p>The <code>${COLUMNS}</code> variable contains the number of columns in the current terminal (it should change if you resize the terminal).  The <code>${TEXT}</code> variable is a placeholder for the text you want to right-align.</p>

<p>The trick here is to use <code>printf</code> to left-pad the string to given width.  <code>printf "%ns" "text"</code> will left-pad the given string (here, <code>text</code>) with spaces until the entire string is <em>n</em> characters wide.</p>

<h3>Right aligning text by padding with something other than space.</h3>

<p>Say you want to pad with <code>-</code> instead of space.  Try:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;`printf -vch &quot;%${COLUMNS}s&quot; &quot;${TEXT}&quot;; printf &quot;%s&quot; &quot;${ch// /-}&quot;`$PS1&quot;</span>
</code></pre></div>


<p>This will left-pad the <code>${TEXT}</code> with spaces, as above, and then replace any spaces with <code>#</code>.</p>

<p>If you have any spaces in <code>${TEXT}</code> you want to preserve, one hacky work-around is to mark spaces in <code>$TEXT</code> with some other character, say <code>_</code>, and then replace <code>_</code> with <code></code> <em>after</em> the other substitution:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;$PS1`printf -vch &quot;%${COLUMNS}s&quot; &quot;${TEXT}&quot;; printf -vch &quot;%s&quot; &quot;${ch// /-}&quot;; printf &quot;%s\n&quot; &quot;${ch//_/ }&quot;`&quot;</span>
</code></pre></div>


<h3>Drawing a line to the end of the line</h3>

<p>I recently added a line containing the date and time to my bash prompt (so I can tell when a given command completed) and wanted to draw a line across the rest of the screen to make it visually easier to tell where a new prompt is displayed.  Something like this:</p>

<div class="highlight"><pre><code class="text">-- Tue 02-Oct-2012 05:19 PM --------------------------------
</code></pre></div>


<p>(Assuming the terminal is 60 characters wide.)</p>

<p>Here&rsquo;s how I did it.</p>

<p>Within my <code>$PROMPT_COMMAND</code> I execute the following:</p>

<div class="highlight"><pre><code class="text">line=&quot;`printf -vch &quot;%${COLUMNS}s&quot; &quot;&quot;; printf &quot;%s&quot; &quot;${ch// /-}&quot;`&quot;
dts=&quot;`date +&quot;-- %a %d-%b-%Y %I:%M %p &quot;`&quot;
PS1=&quot;$PS1\e[1m\e[32m${dts}${line:${#dts}}&quot;
</code></pre></div>


<p>The first line creates a variable (<code>$line</code>) with <code>${COLUMNS}</code> dashes (<code>-</code>).  This line would span the length of the terminal.</p>

<p>The second line creates a variable (<code>$dts</code>) with my date and time format of choice (prefixed with <code>--</code> just for kicks).</p>

<p>The <code>${dts}${line:${#dts}}</code> bit in the third line displays my date and time string (<code>$dts</code>) and then a substring of <code>$line</code>, starting at the length of my date and time string (<code>${#dts}</code>).  (In this particular case <code>${dts}</code> is always exactly 28 characters long, so that value could be hard-coded but this way it works in the general case too.)</p>

<p>If you are curious, the <code>\e[1m\e[32m</code> bit makes the text bold (<code>\e[1m</code>) and green (<code>\e[32m</code>).</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/bash.html">bash</a>, <a href="/snippet/t/bash-prompt.html">bash-prompt</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/find-duplicates-on-linux.html">
        <h2 class="half-bottom">Find duplicate files on Linux.</h2>
      </a>
    
    <div>
      <p>Find files that have the same size and MD5 hash (and hence are likely to be exact duplicates):</p>

<div class="highlight"><pre><code class="console"><span class="lineno">1</span> <span class="gp">$</span> find -not -empty -type f -printf <span class="s2">&quot;%s\n&quot;</span> <span class="p">|</span> <span class="se">\</span>
<span class="lineno">2</span> <span class="gp">&gt;</span> sort -rn <span class="p">|</span> <span class="se">\</span>
<span class="lineno">3</span> <span class="gp">&gt;</span> uniq -d <span class="p">|</span> <span class="se">\</span>
<span class="lineno">4</span> <span class="gp">&gt;</span> xargs -I<span class="o">{}</span> -n1 find -type f -size <span class="o">{}</span>c -print0 <span class="p">|</span> <span class="se">\</span>
<span class="lineno">5</span> <span class="gp">&gt;</span> xargs -0 md5sum <span class="p">|</span> <span class="se">\</span>
<span class="lineno">6</span> <span class="gp">&gt;</span> sort <span class="p">|</span> <span class="se">\</span>
<span class="lineno">7</span> <span class="gp">&gt;</span> uniq -w32 --all-repeated<span class="o">=</span>separate <span class="p">|</span> <span class="se">\</span>
<span class="lineno">8</span> <span class="gp">&gt;</span> cut -d<span class="s2">&quot; &quot;</span> -f3-
</code></pre></div>


<p>You probably want to pipe that to a file as it runs slowly.</p>

<p>If I understand this correctly:</p>

<ol>
<li>Line 1 enumerates the real files non-empty by size.</li>
<li>Line 2 sorts the sizes (as numbers of descending size).</li>
<li>Line 3 strips out the lines (sizes) that only appear once.</li>
<li>For each remaining size, line 4 finds all the files of that size.</li>
<li>Line 5 computes the MD5 hash for all the files found in line 4, outputting the MD5 hash and file name. (This is repeated for each set of files of a given size.)</li>
<li>Line 6 sorts that list for easy comparison.</li>
<li>Line 7 compares the first 32 characters of each line (the MD5 hash) to find duplicates.</li>
<li>Line 8 spits out the file name and path part of the matching lines.</li>
</ol>


<p>Some alternative approaches can be found at <a href="http://www.commandlinefu.com/commands/view/3555/find-duplicate-files-based-on-size-first-then-md5-hash">the original source</a>.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    <div class="align-right"><small>Credit: Found at <a href="http://www.commandlinefu.com/commands/view/3555/find-duplicate-files-based-on-size-first-then-md5-hash">commmandlinefoo.com</a></small></div>
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/shuf-usr-share-dict-words.html">
        <h2 class="half-bottom">Generate a random list of words with `shuf`</h2>
      </a>
    
    <div>
      <p><code>shuf</code> is (in my experience) a little known GNU utility that selects random lines (or bytes) from a file.</p>

<p>For instance, the command:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> shuf -n 3 /usr/share/dict/words
</code></pre></div>


<p>selects three words at random from the <code>words</code> dictionary.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/re-enable-ctrl-alt-backspace.html">
        <h2 class="half-bottom">Restore Ctrl+Alt+Backspace as a way to kill X on Linux.</h2>
      </a>
    
    <div>
      <p>Modern Debian and Ubuntu distributions have this disabled by default.</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> setxkbmap -option terminate:ctrl_alt_backspace
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/how-to-backup-an-sd-card.html">
        <h2 class="half-bottom">Backup an SD card on Linux using dd</h2>
      </a>
    
    <div>
      

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>
<span class="k">if</span> <span class="o">[</span> -b <span class="s2">&quot;/dev/$1&quot;</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">  </span><span class="nv">outfile</span><span class="o">=</span><span class="s2">&quot;sdcard-backup-`date +&quot;</span>%s<span class="s2">&quot;`.dd&quot;</span>
  <span class="nb">echo</span> <span class="s2">&quot;cloning /dev/$1 to $outfile&quot;</span>
  dd <span class="k">if</span><span class="o">=</span>/dev/<span class="nv">$1</span> <span class="nv">of</span><span class="o">=</span><span class="nv">$outfile</span>
  <span class="nb">echo</span> <span class="s2">&quot;tgz-ing $outfile&quot;</span>
  tar zcvf <span class="nv">$outfile</span>.tgz <span class="nv">$outfile</span>
  <span class="nb">echo</span> <span class="s2">&quot;done.&quot;</span>
<span class="k">else</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Usage: $0 /dev/&lt;device&gt;&quot;</span>
<span class="k">fi</span>
<span class="nb">echo</span> <span class="s2">&quot;to restore, unmount(?), then use:&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;tar Ozxf &lt;file&gt; | dd of=&lt;device&gt;&quot;</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a> and <a href="/snippet/t/backup.html">backup</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/find-large-files.html">
        <h2 class="half-bottom">Find large files on Linux.</h2>
      </a>
    
    <div>
      <p><strong>UPDATE:</strong> Reader Luc Pionchon points out that <code>sort</code> supports a <code>-h</code> parameter that sorts by &ldquo;human&rdquo; numbers, hence:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> du -h * <span class="p">|</span> sort -h <span class="p">|</span> tail
</code></pre></div>


<p>is probably a better alternative than any of the following.</p>

<p><strike></p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> du -h * <span class="p">|</span> grep <span class="s2">&quot;^[0-9.]*M&quot;</span> <span class="p">|</span> sort -n
</code></pre></div>


<p>This finds files at least 1 MB in size and then sorts them by size.  Change <code>M</code> to <code>G</code> for files at least 1 GB in size.</p>

<p>(Caveat: files 1 GB or larger will be missed by the MB version.  You can use:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> du -h * <span class="p">|</span> egrep <span class="s2">&quot;^[0-9.]*(M|G)&quot;</span>
</code></pre></div>


<p>to get both, but then the <code>sort -n</code> doesn&rsquo;t work quite the way we&rsquo;d like.)</p>

<p>Of course, you could use <code>du</code> without the <code>-h</code> to get file sizes by the default block size rather than the human-readable 12.4M or 16K, etc.
</strike></p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a> and <a href="/snippet/t/bash.html">bash</a>.</small>
    </div>    
    <div class="align-right"><small>Credit: Thanks to Luc Pionchon for pointing me to `sort -h`.</small></div>
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/using-xrandr.html">
        <h2 class="half-bottom">Set monitor resolution with xrandr</h2>
      </a>
    
    <div>
      

<div class="highlight"><pre><code class="console"><span class="gp">$</span> cvt -r -v 1920 1080
<span class="gp">#</span> 1920x1080 59.93 Hz <span class="o">(</span>CVT 2.07M9-R<span class="o">)</span> hsync: 66.59 kHz<span class="p">;</span> pclk: 138.50 MHz
<span class="go">Modeline &quot;1920x1080R&quot;  138.50  1920 1968 2000 2080  1080 1083 1088 1111 +hsync -vsync</span>
<span class="gp">$</span> xrandr --newmode <span class="s2">&quot;1920x1080R&quot;</span>  138.50  1920 1968 2000 2080  1080 1083 1088 1111 +hsync -vsync
<span class="gp">$</span> xrandr --addmode VGA1 <span class="s2">&quot;1920x1080R&quot;</span>
<span class="gp">$</span> xrandr --output VGA1 --mode <span class="s2">&quot;1920x1080R&quot;</span>
</code></pre></div>


<p>Also handy:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> xrandr --output LVDS1 --off --output VGA1 --auto
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/strip-chars-with-sed.html">
        <h2 class="half-bottom">Strip characters from a string or file</h2>
      </a>
    
    <div>
      

<div class="highlight"><pre><code class="console"><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;A1B2C3&quot;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[A-Z]//g&#39;</span>
<span class="go">123</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/text-processing.html">text-processing</a>, <a href="/snippet/t/sed.html">sed</a> and <a href="/snippet/t/cli.html">cli</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      
        <h2 class="half-bottom">Strip characters from a field in awk</h2>
      
    
    <div>
      <p>E.g., the following command strips alpha characters from the second (tab delimited) field.</p>

<div class="highlight"><pre><code class="awk"><span class="nx">awk</span> <span class="o">-</span><span class="nx">F</span><span class="s2">&quot;\t&quot;</span> <span class="s1">&#39;{gsub(/[A-Za-z]/,&quot;&quot;,$2); print $2 }&#39;</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/text-processing.html">text-processing</a>, <a href="/snippet/t/awk.html">awk</a> and <a href="/snippet/t/cli.html">cli</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/some-awk-basics.html">
        <h2 class="half-bottom">Some `awk` basics</h2>
      </a>
    
    <div>
      <p>Extract tab delimited fields from a file:</p>

<div class="highlight"><pre><code class="awk"><span class="nx">awk</span> <span class="o">-</span><span class="nx">F</span><span class="s2">&quot;\t&quot;</span> <span class="s1">&#39;{print &quot;field one=&quot; $1 &quot;; field two=&quot; $2 }&#39;</span> <span class="nx">file</span>
</code></pre></div>




    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/text-processing.html">text-processing</a>, <a href="/snippet/t/awk.html">awk</a> and <a href="/snippet/t/cli.html">cli</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/skip-n-lines.html">
        <h2 class="half-bottom">Skip the first N lines in file</h2>
      </a>
    
    <div>
      <h3>using <code>tail</code></h3>

<p>To skip the first line of a file (and start piping data at the second line):</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> tail -n +2 FILENAME
</code></pre></div>


<p>More generally:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> tail -n +M FILENAME
</code></pre></div>


<p>where <strong><code>M</code></strong> is the number of the first line you want to see (i.e., the number of lines to skip plus one).</p>

<h3>using <code>sed</code></h3>

<p>To skip the first line of a file (and start piping data at the second line):</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> sed 1d FILENAME
</code></pre></div>


<p>More generally:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> tail A,Bd filename
</code></pre></div>


<p>when you want to exclude lines <strong><code>A</code></strong> through <strong><code>B</code></strong> from the output.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a>, <a href="/snippet/t/text-processing.html">text-processing</a>, <a href="/snippet/t/sed.html">sed</a> and <a href="/snippet/t/cli.html">cli</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/list-fonts.html">
        <h2 class="half-bottom">List Available Fonts</h2>
      </a>
    
    <div>
      <p>To view a list of available fonts, use <code>fc-list</code>.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/linux.html">linux</a> and <a href="/snippet/t/rudimentary.html">rudimentary</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->

  <div class="snippet">
    
      <a class="permalink" href="/snippet/s/always-append-bash-history.html">
        <h2 class="half-bottom">Append to ~/.bash_history "immediately"</h2>
      </a>
    
    <div>
      <p>Bash normally waits until a session (terminal) is closed before it writes commands to the history.</p>

<p>You can add a call to <code>history -a</code> to <code>PROMPT_COMMAND</code> to make bash to append your history to <code>~/.bash_history</code> every time it displays your prompt.</p>

<div class="highlight"><pre><code class="console"><span class="go">PROMPT_COMMAND=&quot;history -a; $PROMPT_COMMAND&quot;</span>
</code></pre></div>


<p>The environment variable <code>PROMPT_COMMAND</code> is executed when bash is about to display your prompt.</p>

<p>The command <code>history -a</code> appends the current history to <code>~/.bash_history</code>.</p>

    </div>
    <div class="align-right">
      <small>Tags: <a href="/snippet/t/bash.html">bash</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
    </div>    
    
  </div>
  <!-- <hr/> -->



      </div>

    </div>
  </div>

  

  <div id="footer">
    <div class="container">
      <div class="sixteen columns align-center">
        <p class="half-bottom">
          <span class="nobr">rw&#97;ldho<script language="javascript">(function(){var f=function(c) { document.write(String.fromCharCode(c)); }; f(0146); f(0x66); f(0100); })();</script>g&#109;ail&#46;com</span>
          &nbsp;|&nbsp;
          <span class="nobr">(&#55;03) 593-2<script language="javascript">document.write("3"); document.write((3-2+1)+"");</script>9</span>
        </p>
        <p class="half-bottom">
          <span class="nobr"><a href="/">heyrod.com</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a href="/page/colophon.html">credits</a></span>
        </p>
        <p class="half-bottom">&copy; Copyright 2012-2014 Rodney Waldhoff.</p>
        <div id="caveator">
          <p class="smallprint">This page was generated at 10:19 PM on 10 February 2014</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
