<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>How to right-align text in your bash prompt</title>
	
	<meta name="author" content="rod">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="/css/skeleton-all-min.css">
	<link rel="stylesheet" href="/css/style.css">
  
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  
  <link rel="icon" type="image/svg+xml" href="img/braindump-mod.svg"/>
	<link rel="alternate shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="img/braindump-57x57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/braindump-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/braindump-114x114.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/braindump-144x144.png">
  <link rel="apple-touch-startup-image" sizes="320x460" href="img/startup-320x460.png">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34329491-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>
    
  

  <nav id="primary">
    <div class="container">
      <div class="fourteen columns offset-by-two">
        <ul>
          
            
            
            <li class="" >
              <a class="" href="/">Home</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/project">Projects</a>
            </li>
          
            
            
              
            
            <li class="active" >
              <a class="active" href="/snippet">Snippets</a>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>
  
  

  <div id="main">
    <div class="container">

      

      <div class="three columns align-center">
        <div style="margin-top:50px;"><a href="/"><img src="/img/braindump-64x64.png" height="64" width="64"></a></div>
        <div class="mtop"><a href="/" class="nobr nou" style="color:#555;"><b>Rodney Waldhoff</b></a></div>
        <ul class="mtop">
          <li><a class="flatbutton" href="https://github.com/rodw"><img style="vertical-align:middle; float:left;" src="/img/octocat-24x24.png" height="24" width="24"><span class="float-right">GitHub</span></a></li>
          <li><a class="flatbutton" href="http://www.linkedin.com/in/rwald"><img style="vertical-align:middle; float:left;" src="/img/linkedin-24x24.png" height="24" width="24"><span class="float-right">LinkedIn</span></a></a></li>
        </ul>
      </div>

      

      

      
        <div class="thirteen columns">
          <div id="page-header" class="half-bottom mtop">
            
            <div class="page-class remove-bottom">
              
                  <a href="/snippet">Snippets</a> are tiny notes I've collected for easy reference.
                
            </div>
          </div>
          
        </div>
      

      

      <div class="thirteen columns bulleted">
        <div class="snippet">
  <h2 class="half-bottom">How to right-align text in your bash prompt</h2>
  <div>
    <h3>Right aligning text by padding with spaces</h3>

<p>To have text in your bash prompt (<code>$PS1</code>) hug the right side of the terminal:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;`printf &quot;%${COLUMNS}s\n&quot; &quot;${TEXT}&quot;`$PS1&quot;</span>
</code></pre>
</div>


<p>(This assumes you want the right-aligned text to appear before the rest of your prompt, if any.  Move the <code>$PS1</code> bit to the left side of the string to have the right-aligned text appear after the rest of your prompt.)</p>

<p>The <code>${COLUMNS}</code> variable contains the number of columns in the current terminal (it should change if you resize the terminal).  The <code>${TEXT}</code> variable is a placeholder for the text you want to right-align.</p>

<p>The trick here is to use <code>printf</code> to left-pad the string to given width.  <code>printf "%ns" "text"</code> will left-pad the given string (here, <code>text</code>) with spaces until the entire string is <em>n</em> characters wide.</p>

<h3>Right aligning text by padding with something other than space.</h3>

<p>Say you want to pad with <code>-</code> instead of space.  Try:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;`printf -vch &quot;%${COLUMNS}s&quot; &quot;${TEXT}&quot;; printf &quot;%s&quot; &quot;${ch// /-}&quot;`$PS1&quot;</span>
</code></pre>
</div>


<p>This will left-pad the <code>${TEXT}</code> with spaces, as above, and then replace any spaces with <code>#</code>.</p>

<p>If you have any spaces in <code>${TEXT}</code> you want to preserve, one hacky work-around is to mark spaces in <code>$TEXT</code> with some other character, say <code>_</code>, and then replace <code>_</code> with <code></code> <em>after</em> the other substitution:</p>

<div class="highlight"><pre><code class="console"><span class="go">PS1=&quot;$PS1`printf -vch &quot;%${COLUMNS}s&quot; &quot;${TEXT}&quot;; printf -vch &quot;%s&quot; &quot;${ch// /-}&quot;; printf &quot;%s\n&quot; &quot;${ch//_/ }&quot;`&quot;</span>
</code></pre>
</div>


<h3>Drawing a line to the end of the line</h3>

<p>I recently added a line containing the date and time to my bash prompt (so I can tell when a given command completed) and wanted to draw a line across the rest of the screen to make it visually easier to tell where a new prompt is displayed.  Something like this:</p>

<div class="highlight"><pre><code class="text">-- Tue 02-Oct-2012 05:19 PM --------------------------------
</code></pre>
</div>


<p>(Assuming the terminal is 60 characters wide.)</p>

<p>Here&rsquo;s how I did it.</p>

<p>Within my <code>$PROMPT_COMMAND</code> I execute the following:</p>

<div class="highlight"><pre><code class="text">line=&quot;`printf -vch &quot;%${COLUMNS}s&quot; &quot;&quot;; printf &quot;%s&quot; &quot;${ch// /-}&quot;`&quot;
dts=&quot;`date +&quot;-- %a %d-%b-%Y %I:%M %p &quot;`&quot;
PS1=&quot;$PS1\e[1m\e[32m${dts}${line:${#dts}}&quot;
</code></pre>
</div>


<p>The first line creates a variable (<code>$line</code>) with <code>${COLUMNS}</code> dashes (<code>-</code>).  This line would span the length of the terminal.</p>

<p>The second line creates a variable (<code>$dts</code>) with my date and time format of choice (prefixed with <code>--</code> just for kicks).</p>

<p>The <code>${dts}${line:${#dts}}</code> bit in the third line displays my date and time string (<code>$dts</code>) and then a substring of <code>$line</code>, starting at the length of my date and time string (<code>${#dts}</code>).  (In this particular case <code>${dts}</code> is always exactly 28 characters long, so that value could be hard-coded but this way it works in the general case too.)</p>

<p>If you are curious, the <code>\e[1m\e[32m</code> bit makes the text bold (<code>\e[1m</code>) and green (<code>\e[32m</code>).</p>

  </div>
  <div class="align-right">
    <small>Tags: <a href="/snippet/t/bash.html">bash</a>, <a href="/snippet/t/bash-prompt.html">bash-prompt</a> and <a href="/snippet/t/linux.html">linux</a>.</small>
  </div>    
  
</div>
<!-- <hr/> -->


      </div>

    </div>
  </div>

  

  <div id="footer">
    <div class="container">
      <div class="sixteen columns align-center">
        <p class="half-bottom">
          <span class="nobr">rw&#97;ldho<script language="javascript">(function(){var f=function(c) { document.write(String.fromCharCode(c)); }; f(0146); f(0x66); f(0100); })();</script>g&#109;ail&#46;com</span>
          &nbsp;|&nbsp;
          <span class="nobr">(&#55;03) 5&#51;5-6<script language="javascript">document.write("0"); document.write((4-3+1)+"");</script>6</span>
        </p>
        <p class="half-bottom">
          <span class="nobr"><a href="/">heyrod.com</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a class="pointer" onclick="(function(){document.getElementById('caveator').className = (document.getElementById('caveator').className == 'off') ? 'on' : 'off';})(); return false">small print</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a href="/page/colophon.html">credits</a></span>
        </p>
        <p class="half-bottom">&copy; Copyright 2012 Rodney Waldhoff.</p>
        <div id="caveator" class="off">
          <p class="smallprint">
            Except for content that belongs to someone else. Then the copyright belongs to whomever it belongs to.
            The views expressed here are solely my own. They do not reflect in any way those of any institution, organization or group with which I am affiliated. My wife probably disagrees with me too. I can't even promise that <i>I</i> agree with anything you read here.
            Also, I'm not a doctor or a lawyer or really qualified to be giving any advice at all. Ipso facto caveat emptor inter alia. This page was generated at  9:31 PM on 18 October 2012. Tempus fugit.
          </p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

