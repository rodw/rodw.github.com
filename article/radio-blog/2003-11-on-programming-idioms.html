<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>On Programming Idioms</title>
	
	<meta name="author" content="rod">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  
  <link rel="icon" type="image/svg+xml" href="img/braindump-mod.svg"/>
	<link rel="alternate shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="img/braindump-57x57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/braindump-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/braindump-114x114.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/braindump-144x144.png">
  <link rel="apple-touch-startup-image" sizes="320x460" href="img/startup-320x460.png">

	<link rel="stylesheet" href="/css/skeleton-all-min.css">
	<link rel="stylesheet" href="/css/style.min.css">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34329491-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>

  

  <nav id="primary">
    <div class="container">
      <div class="fourteen columns offset-by-two">
        <ul>
          
            
            
            <li class="" >
              <a class="" href="/">Home</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/project">Projects</a>
            </li>
          
            
            
              
            
            <li class="active" >
              <a class="active" href="/article">Articles</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/snippet">Snippets</a>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>

  

  <div id="main">
    <div class="container">

      

      <div class="three columns align-center">
        <div style="margin-top:50px;"><a href="/"><img src="/img/braindump-64x64.png" height="64" width="64"></a></div>
        <div class="mtop"><a href="/" class="nobr nou" style="color:#555;"><b>Rodney Waldhoff</b></a></div>
        <ul class="mtop">
          <li><a class="flatbutton" title="github.com/rodw" href="https://github.com/rodw"><img style="vertical-align:middle; float:left;" src="/img/octocat-24x24.png" height="24" width="24"><span class="float-right">GitHub</span></a></li>
          <li><a class="flatbutton" title="Rod @ LinkedIn" href="http://www.linkedin.com/in/rwald"><img style="vertical-align:middle; float:left;" src="/img/linkedin-24x24.png" height="24" width="24"><span class="float-right">LinkedIn</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ Twitter" href="https://twitter.com/RodWaldhoff"><img style="vertical-align:middle; float:left;" src="/img/twitter-24x24.png" height="24" width="24"><span class="float-right">Twitter</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ StackOverflow" href="http://stackoverflow.com/users/1225825/rod"><img style="vertical-align:middle; float:left;" src="/img/stackoverflow-24x24.png" height="24" width="24"><span class="float-right">SOflow</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ Math.StackExchange" href="http://math.stackexchange.com/users/116929/rod"><img style="vertical-align:middle; float:left;" src="/img/math-stackexchange-24x24.png" height="24" width="24"><span class="float-right">Math@SE</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ TeX.StackExchange" href="http://tex.stackexchange.com/users/37896/rod"><img style="vertical-align:middle; float:left;" src="/img/tex-stackexchange-24x24.png" height="24" width="24"><span class="float-right">TeX@SE</span></a></a></li>
          <li><a class="flatbutton" title="The Graphviz Cookbook" href="http://noumlaut.com/graphviz-cookbook"><img style="vertical-align:middle; float:left;" src="/img/noumlaut-24x24.png" height="24" width="24"><span class="float-right">GV Book</span></a></a></li>
          <li><a class="flatbutton" title="Resume/CV for Rodney Waldhoff (PDF)" href="/img/Waldhoff-Rodney-resume-2014-02.pdf"><img style="vertical-align:middle; float:left;" src="/img/rod-photo-grayscale-24x24.png" height="24" width="24"><span class="float-right">Resume</span></a></li>
        </ul>
      </div>

      

      

      
        <div class="thirteen columns">
          <div id="page-header" class="half-bottom mtop">
            
              <h1 class=" remove-bottom">On Programming Idioms</h1>
            
            <div class="page-class remove-bottom">
              
                  <!-- page class '' not matched. -->
              
            </div>
          </div>
          <hr class="half-bottom remove-top"/>
        </div>
      

      

      <div class="thirteen columns bulleted">
        <div style="color:#333">(Back in 2003 I ran <a href="http://radio.weblogs.com/0122027/">a moderately popular tech blog</a> on the Radio UserLand platform.  This is an archived version of a post from that blog. You can view <a href="/article/radio-blog/index.html">an index of all the archived posts</a>.)</div><hr>
<b>Friday, 14 November 2003</b>
<p>
Two things I'm always keen to learn when picking up a new programming language are:
</p>
<ol>
<li>How does one organize large projects?  In other words, how does one partition responsibilities and types across namespaces, modules and files?</li>
<li>What are the common idioms in the language?</li>
</ol>
<p>
I've been doing some string processing work with Ruby recently, and it's got me thinking about examples of the latter.
</p><p>
For example, in Java, the String class doesn't have a direct, boolean-valued method that will tell you whether or not a String contains another String, i.e., there's nothing like:
</p>
<pre>if(someString.contains(anotherString)) { ... }</pre>
<p>
Instead, most Java developers will write:
</p>
<pre>if(someString.indexOf(anotherString) != -1) { ... }</pre>
<p>
where String.indexOf(String) returns the index of the first occurrence of the argument String, or -1 if the given String isn't found.  Most Java developers will immediately recognize that as the "String.contains" idiom, and won't miss a beat.
</p><p>
This idiom is so strong in the Java community that it's almost counter-productive to write a custom utility method:
</p>
<pre>public class StringUtils {
  public static boolean contains(String a, String b) {
    return (a.indexOf(b) != -1);
  }
}</pre>
<p>
since many developers who see
</p>
<pre>if(StringUtils.contains(someString,anotherString)) { ... }</pre>
<p>
are likely to wonder whether the StringUtils.contains method really does what it is implied--Is this equivalent to the String.indexOf idiom?  Is that someString.contains(anotherString) or vice versa? How are null's handled? etc.  Unless the developer is already comfortable and familiar with the StringUtils class being used, this code is probably less readable to an experienced developer than the "indexOf != -1" formulation.
</p><p>
(This is not to say that "String.indexOf(x) != -1" is actually preferable to "String.contains(x)", but rather that in the absence of String.contains, the idiom is more widely recognized than a custom utility method.  Why Sun can't at some point introduce a String.contains method, say in JDK 1.5,  isn't entirely clear to me.)
</p><p>
Now, in the Ruby scripting I've been doing recently, I keep needing to determine whether a String begins with a given prefix.  In Java, that's the String.startsWith method, of course.  The Ruby String class does not have a startsWith method, but one of the neat things about Ruby is that it's possible to literally add such a method the the String class, as follows:
</p>
<pre>class String
  def startsWith str
    return self[0...str.length] == str
  end
end</pre>
<p>
after which everything behaves exactly like the built-in String class contained that definition.  For example, one can then write:
</p>
<pre>if someString.startsWith(anotherString) ...</pre>
<p>
or even
</p>
<pre>if "a literal string".startsWith(anotherString) ...</pre>
<p>
etc.
</p><p>
Of course, the implementation I used for String.startsWith (<code>self[0...str.length] == str</code>) is just one of several possible implementations.  Regular expressions provide one way of implementing such a check.  The Java-like indexOf function provides another (e.g., <code>self.indexOf(str) == 0</code>).
</p><p>
Since there is no built-in String.startsWith (or for that matter String.contains) in Ruby, I wonder if there is some common idiom that experienced Ruby developers find more readable than adding a custom method to String?  If not for String.startsWith, how about String.contains?
</p>

      </div>

    </div>
  </div>

  

  <div id="footer">
    <div class="container">
      <div class="sixteen columns align-center">
        <p class="half-bottom">
          <span class="nobr">rw&#97;ldho<script language="javascript">(function(){var f=function(c) { document.write(String.fromCharCode(c)); }; f(0146); f(0x66); f(0100); })();</script>g&#109;ail&#46;com</span>
          &nbsp;|&nbsp;
          <span class="nobr">(&#55;03) 593-2<script language="javascript">document.write("3"); document.write((3-2+1)+"");</script>9</span>
        </p>
        <p class="half-bottom">
          <span class="nobr"><a href="/">heyrod.com</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a href="/page/colophon.html">credits</a></span>
        </p>
        <p class="half-bottom">&copy; Copyright 2012-2014 Rodney Waldhoff.</p>
        <div id="caveator">
          <p class="smallprint">This page was generated at  3:30 PM on 15 February 2014</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
