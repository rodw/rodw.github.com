---
layout: layout
title: Commons Logging was my fault
section: article
---
<div style="color:#333">(Back in 2003 I ran <a href="http://radio.weblogs.com/0122027/">a moderately popular tech blog</a> on the Radio UserLand platform.  This is an archived version of a post from that blog. You can view <a href="/article/radio-blog/index.html">an index of all the archived posts</a>.)</div><hr>
<b>Friday, 15 August 2003</b>
<p>
I'll come right out and admit it: <a href="http://jakarta.apache.org/commons/logging.html" title="Jakarta Commons Logging">commons-logging</a>, at least in its initial form, was my fault, though probably not mine alone.
</p><p>
Back in 2001 I did a fair bit of work <a href="http://google.com/search?q=cache:www.mail-archive.com/jakarta-commons%40jakarta.apache.org/msg03954.html" title="&quot;[httpclient] refactoring httpclient&quot; (from jakarta-commons@jakarta.apache.org, 27 Aug 2001) [google cache]">refactoring and debugging</a> <a href="http://jakarta.apache.org/commons/httpclient" title="Jakarta Commons HttpClient">commons-httpclient</a>.  As part of that effort, I replaced a custom setDebug()/System.out.println based logging system with <a href="http://jakarta.apache.org/log4j/" title="Apache's Jakarta Log4J">log4j</a>.  I did this for several reasons but all of them come down to the fact that a fully-fledged logging system is often quite useful.  In fact, that debugging effort probably wouldn't have happened without it.
</p><p>
This change turned out to be controversial, and a runtime dependency upon log4j was in fact <a href="http://google.com/search?q=cache:www.mail-archive.com/jakarta-commons%40jakarta.apache.org/msg02694.html" title="&quot;Re: [httpclient] logging and testing changes&quot; (from jakarta-commons@jakarta.apache.org, 27 Jul 2001) [google cache]">vetoed</a>.  After an enormous amount of discussion, not all of it pretty, a <a href="http://google.com/search?q=cache:www.mail-archive.com/jakarta-commons%40jakarta.apache.org/msg02778.html" title="&quot;Re: [httpclient] [VOTE] HTTP client 1.0 release&quot; (from jakarta-commons@jakarta.apache.org, 1 Aug 2001) [google cache]">compromise</a> was finally agreed to.  This compromise basically said (a) use a thin wrapper around either log4j or the System.out logging initially implemented and (b) allow the user to specify whether to use log4j or System.out.println based upon a method call (inversion-of-control style I guess) or an external property.  I did the first implementation of this.  It was later <a href="http://google.com/search?q=cache:www.mail-archive.com/jakarta-commons%40jakarta.apache.org/msg02794.html" title="&quot;logging again (was RE: [httpclient] [VOTE] HTTP client 1.0 release)&quot; (from jakarta-commons@jakarta.apache.org, 3 Aug 2001) [google cache]">suggested</a>, probably reasonably so, that this "log wrapping" package be extracted from httpclient for use in similar circumstances.  In a more robust or complicated form (depending upon your perspective) this eventually became commons-logging.
</p><p>
For all its warts, this brief history of Commons Logging shows the "bazaar-style" of open source development working as it should: the operative word here being "compromise".
</p><p>
Personally, I don't believe it to be especially important that Jakarta Commons committers be able to express their creativity by the selection of logging frameworks.  I'd have been happy simply using log4j, and I think Ceki's work with the "light" log4j-ME would have been sufficient to address most of the technical concerns raised.  Yet others disagree, and I'll respect that position.  Certainly respect for that position has encouraged advocates of <a href="http://avalon.apache.org/logkit/" title="Apache Avalon LogKit">alternative logging implementations</a> to participate more fully in Jakarta Commons.
</p><p>
That said, I think <a href="http://www.freeroller.net/page/fate/20030811#the_evils_of_commons_logging" title="The evils of commons-logging.jar and its ilk">Hani</a> and <a href="http://www.freeroller.net/page/gstamp/20030812#commons_logging" title="Commons logging">Glen</a> miss the point entirely.  The purpose of Commons Logging is <i>not</i> to isolate your code from changes in the underlying logging framework.  (That's certainly easy enough to do on your own, and not really worth doing in the first place given the ease of switching from one logging framework to another.)  The purpose of Commons Logging is <i>not</i> to somehow be more useful than actual logging frameworks by being more general.  The purpose of Commons Logging is <i>not</i> to somehow take the logging world by storm.  In fact, there are very limited circumstances in which Commons Logging is useful. If you're building a stand-alone application, don't use commons-logging.  If you're building an application server, don't use commons-logging.  If you're building a moderately large framework, don't use commons-logging.  If however, like the Jakarta Commons project, you're building a tiny little <i>component</i> that you intend for other developers to embed in their applications and frameworks, and you believe that logging information might be useful to those clients, and you can't be sure what logging framework they're going to want to use, then commons-logging might be useful to you.
</p><p>
On a slightly unrelated note, I think that Hani's post fails to adequately explain how the problems caused by trying to integrate systems that use incompatible versions of the same component are unique to Commons Logging.  If you want a discussion of the technical issues with Commons Logging, which are quite genuine, there are <a href="http://www.qos.ch/logging/thinkAgain.html" title="Ceki's &quot;Think again before adopting the commons-logging API&quot;">much better analyses</a> available.
</p>
