<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>Ruby Userland</title>
	
	<meta name="author" content="rod">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  
  <link rel="icon" type="image/svg+xml" href="img/braindump-mod.svg"/>
	<link rel="alternate shortcut icon" href="img/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="img/braindump-57x57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/braindump-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/braindump-114x114.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/braindump-144x144.png">
  <link rel="apple-touch-startup-image" sizes="320x460" href="img/startup-320x460.png">

	<link rel="stylesheet" href="/css/skeleton-all-min.css">
	<link rel="stylesheet" href="/css/style.min.css">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34329491-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>

  

  <nav id="primary">
    <div class="container">
      <div class="fourteen columns offset-by-two">
        <ul>
          
            
            
            <li class="" >
              <a class="" href="/">Home</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/project">Projects</a>
            </li>
          
            
            
              
            
            <li class="active" >
              <a class="active" href="/article">Articles</a>
            </li>
          
            
            
            <li class="" >
              <a class="" href="/snippet">Snippets</a>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>

  

  <div id="mainbody">
    <div class="container">

      

      <div id="content-jump" class="align-center"><a href="#maincontent">Jump to content.</a></div>
      <div class="three columns align-center">
        <div style="margin-top:50px;"><a href="/"><img src="/img/braindump-64x64.png" height="64" width="64"></a></div>
        <div class="mtop"><a href="/" class="nobr nou" style="color:#555;"><b>Rodney Waldhoff</b></a></div>
        <ul class="mtop">
          <li><a class="flatbutton" title="github.com/rodw" href="https://github.com/rodw"><img style="vertical-align:middle; float:left;" src="/img/octocat-24x24.png" height="24" width="24"><span class="float-right">GitHub</span></a></li>
          <li><a class="flatbutton" title="Rod @ LinkedIn" href="http://www.linkedin.com/in/rwald"><img style="vertical-align:middle; float:left;" src="/img/linkedin-24x24.png" height="24" width="24"><span class="float-right">LinkedIn</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ Twitter" href="https://twitter.com/RodWaldhoff"><img style="vertical-align:middle; float:left;" src="/img/twitter-24x24.png" height="24" width="24"><span class="float-right">Twitter</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ StackOverflow" href="http://stackoverflow.com/users/1225825/rod"><img style="vertical-align:middle; float:left;" src="/img/stackoverflow-24x24.png" height="24" width="24"><span class="float-right">SOflow</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ Math.StackExchange" href="http://math.stackexchange.com/users/116929/rod"><img style="vertical-align:middle; float:left;" src="/img/math-stackexchange-24x24.png" height="24" width="24"><span class="float-right">Math@SE</span></a></a></li>
          <li><a class="flatbutton" title="Rod @ TeX.StackExchange" href="http://tex.stackexchange.com/users/37896/rod"><img style="vertical-align:middle; float:left;" src="/img/tex-stackexchange-24x24.png" height="24" width="24"><span class="float-right">TeX@SE</span></a></a></li>
          <li><a class="flatbutton" title="The Graphviz Cookbook" href="http://noumlaut.com/graphviz-cookbook"><img style="vertical-align:middle; float:left;" src="/img/noumlaut-24x24.png" height="24" width="24"><span class="float-right">GV Book</span></a></a></li>
          <li><a class="flatbutton" title="Resume/CV for Rodney Waldhoff (PDF)" href="/img/Waldhoff-Rodney-resume-2014-02.pdf"><img style="vertical-align:middle; float:left;" src="/img/rod-photo-grayscale-24x24.png" height="24" width="24"><span class="float-right">Resume</span></a></li>
        </ul>
      </div>

      <div class="thirteen columns"><a name="maincontent"></a></div>
      
      
      
      <div class="thirteen columns">
        <div id="page-header" class="half-bottom mtop">
          
            <h1 class=" remove-bottom">Ruby Userland</h1>
          
          <div class="page-class remove-bottom">
            
                <!-- page class '' not matched. -->
            
          </div>
        </div>
        <hr class="half-bottom remove-top"/>
      </div>
    
    
      <div class="thirteen columns bulleted">
        <div style="color:#333">(Back in 2003 I ran <a href="http://radio.weblogs.com/0122027/">a moderately popular tech blog</a> on the Radio UserLand platform.  This is an archived version of a post from that blog. You can view <a href="/article/radio-blog/index.html">an index of all the archived posts</a>.)</div><hr>
<b>Friday, 21 November 2003</b>
<p>
As I <a href="http://radio.weblogs.com/0122027/2003/11/04.html#a95" title="Custom Radio UserLand Clients?">previously mentioned</a>, I've been toying with custom clients to the <a href="http://www.soapware.org/xmlStorageSystem">XmlStorageSystem</a> XML-RPC protocol used by <a href="http://radio.userland.com/">Radio Userland</a> and <a href="http://www.myelin.co.nz/wcswiki/w/CommunityServerWiki">several open source blog servers</a>, with the ultimate goal of hosting a custom blog on the radio.weblogs.com host.
</p><p>
Over the past couple of evenings I've hacked out <a href="/article/radio-blog/xmlStorageSystem.rb.txt" title="xmlStorageSystem.rb">xmlStorageSystem.rb</a>, a reasonably functional Ruby-based client to the XmlStorageSystem system protocol.  It works like this:
</p>
<p>
To create a new instance of the client, use:
</p>
<pre>XmlStorageSystem.new(<i>&lt;usernumber&gt;</i>,<i>&lt;md5-hash-of-password&gt;</i>,<i>&lt;root-directory&gt;</i>)</pre>
<p>
For instance, I use:
</p>
<pre>XmlStorageSystem.new('122027','8c8034f5c9d68564e155c67a6d4e4612','/0122027/')</pre>
<p>
although that's not my actual password.
</p>
<p>
Actually, my local copy of xmlStorageSystem.rb has these value specified as the defaults, so I just user XmlStorageSystem.new, and I'll use that form in the rest of these examples.  The constructor also accepts an number of arguments that should allow one to connect to the <a href="http://www.pycs.net/">Python Community Server</a> and others, although Radio is the only server I've tried.
</p>
<p>
To get a listing of the files currently stored on the server, use:
</p>
<pre>XmlStorageSystem.new.getMyDirectory</pre>
<p>
To download all those files to a local directory
</p>
<pre>XmlStorageSystem.new.backupMyDirectory 'backupdir'</pre>
<p>
To upload a file (or files) to the server, use:
</p>
<pre>XmlStorageSystem.new.saveMultipleFiles( 'local-base-dir', [ 'file1', 'file2', 'etc' ])</pre>
<p>
To delete a file (or files)  from the server, use:
</p>
<pre>XmlStorageSystem.new.deleteMultipleFiles( [ 'file1', 'file2', 'etc' ])</pre>
<p>
Finally, the really handy one:
</p>
<pre>XmlStorageSystem.new.updateFromLocalDirectory 'localdir'</pre>
<p>
Which will compare the list of files in the local directory with those on the server, delete the ones that don't appear locally, and load/update the rest.
</p><p>
Since this is Ruby, it's easy to set up little shell scripts that invoke those commands in ways useful to your personal work style.
</p><p>
If one wanted to be clever, there is metadata available via XmlStorageSystem.getMyDirectory that would allow one to determine whether or not a file has changed since it was last uploaded, but I haven't gotten around to that yet.
</p><p>
I'm still pretty much a Ruby neophyte, so there's probably substantial room for improvement there.  In particular, (1) there's no error handling present just yet and (2) the current implementation supports hackablity (changing the script itself) more than extensibility.  Nevertheless, it's neat that a Ruby neophyte can write a basic XmlStorageSystem client in 150 lines of readable code.
</p>

        
        
      </div>
    </div>
  </div>

  

  <div id="footer">
    <div class="container">
      <div class="sixteen columns align-center">
        <p class="half-bottom">
          <span class="nobr">rw&#97;ldho<script language="javascript">(function(){var f=function(c) { document.write(String.fromCharCode(c)); }; f(0146); f(0x66); f(0100); })();</script>g&#109;ail&#46;com</span>
          &nbsp;|&nbsp;
          <span class="nobr">(&#55;03) 593-2<script language="javascript">document.write("3"); document.write((3-2+1)+"");</script>9</span>
        </p>
        <p class="half-bottom">
          <span class="nobr"><a href="/">heyrod.com</a></span>
          &nbsp;|&nbsp;
          <span class="nobr"><a href="/page/colophon.html">credits</a></span>
        </p>
        <p class="half-bottom">&copy; Copyright 2012-2014 Rodney Waldhoff.</p>
        <div id="caveator">
          <p class="smallprint">This page was generated at  4:36 PM on 21 February 2014</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
