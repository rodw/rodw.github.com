<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Unit tests with log statements are a code smell | HeyRod.com</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/hjs/railscasts.min.css"><style></style></head><body role="document"><nav class="navbar navbar-inverse" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">HeyRod.com</a></div><div  id="main-nav" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/"><i class='fa fa-home'></i>&nbsp;&nbsp;Home</a></li><li><a href="/projects/"><i class='fa fa-briefcase'></i>&nbsp;&nbsp;Projects</a></li><li class="active"><a href="/articles/"><i class='fa fa-book'></i>&nbsp;&nbsp;Articles <span class="sr-only">(current)</span></a></li><li><a href="/snippets/"><i class='fa fa-hashtag'></i>&nbsp;&nbsp;Snippets</a></li></ul></div></div></nav><div class="wrapper"><div class="main-container"><div class="container"><div class="row"><div class="col-md-2 text-center"><a href="/"><img src="/img/rod-fc-circle-on-white-200x200.png" height="100" width="100"></a><br>&nbsp;<br>Rodney Waldhoff<br><a href="http://heyrod.com/"><i class="fa fa-cloud"></i> HeyRod.com</a><br><a href="mailto:rwaldhoff+heyrod.com@gmail.com"><i class="fa fa-envelope"></i>  Email</a><br>&nbsp;<br><a href="https://github.com/rodw/"><i class="fa fa-github-alt"></i> GitHub</a><br><a href="http://stackoverflow.com/users/1225825/rod"><i class="fa fa-stack-overflow"></i> StackOverflow</a><br><a href="https://www.linkedin.com/in/rwald"><i class="fa fa-linkedin"></i> LinkedIn</a><br>&nbsp;</div><div class="col-md-10"><h1 id="unit-tests-with-log-statements-are-a-code-smell">Unit tests with log statements are a code smell</h1>
<div style="color:#333">(Back in 2003 I ran <a href="http://radio.weblogs.com/0122027/">a moderately popular tech blog</a> on the Radio UserLand platform.  This is an archived version of a post from that blog. You can view <a href="/articles/radio-blog/index.html">an index of all the archived posts</a>.)</div><hr>
<b>Friday, 2 May 2003</b>

<p>
While this is not an earth shattering realization, I&#39;ve come hold the opinion that log statements (<a href="http://jakarta.apache.org/log4j/" title="jakarta.apache.org/log4j">log4j</a>, <a href="http://avalon.apache.org/logkit/" title="avalon.apache.org/logkit">logkit</a>, <a href="http://java.sun.com/j2se/1.4.1/docs/api/java/util/logging/package-summary.html" title="javadocs for java.util.logging">java.util.logging</a>, <a href="http://jakarta.apache.org/commons/logging/" title="jakarta.apache.org/commons/logging">commons-logging</a>, what have you) within unit tests are a <a href="http://c2.com/cgi/wiki?CodeSmell" title="Ward's Wiki: CodeSmell">code smell</a>, perhaps universally.
</p><p>
While I&#39;ll sometimes add a few System.out.println calls to a unit test while I&#39;m trying to diagnose a particular failure, configuring a full-blown logging setup within a unit test always seemed like more time and trouble than it was worth. From time to time I&#39;ll encounter a heavily logged TestCase in some code base I&#39;m working with.  The more I work with such TestCases, the more I find this to be an indication that something is not right.
</p><p>
Here&#39;s why:
</p>
<ul>
<li>I find it hard to imagine a test first/test driven development approach that leads to log statements within unit tests (but I can imagine &quot;test last&quot; approaches that will). The presence of logging strongly suggests that the tested code was not developed in a test driven fashion.</li>
<li>The role of logging frameworks and that of automated unit testing frameworks are at odds.  Logging calls provide persistent, if only intermittently used, diagnostic and informational messages, typically intended for manual inspection <sup><a href="#n28.1"><em></a></sup>.  Automated unit tests are meant to be self-interpreting, success or failure should be obvious without manual inspection.  The use of diagnostic or informational log messages within unit tests suggests your tests aren&#39;t sufficiently self-interpreting.</li>
<li>Anecdotally, the objects being tested by these cases are brittle in the face of change.  This may stem from poor factoring: there are too many subtle and perhaps unplanned interactions between methods, or methods aren&#39;t well focused enough to allow for orthogonal changes.</li>
<li>Anecdotally, test failures remain difficult to diagnose and fix despite the log messages. This also stems from poor factoring: the individual test cases and assertions are too coarse grained to help identify the root cause of a test failure.</li>
</ul>
<div class="footnote"><p><a name="n28.1"></em></a> If you find yourself wanting programmatic inspection of log messages, I&#39;ll suggest you&#39;re looking for messaging, not logging.</p></div></div></div></div></div></div><hr style="width:100%"><div class="container"><div class="row"><div class="col-md-4 text-muted">This page was generated at 2:07 PM on 13 Dec 2015.</div><div class="col-md-4 text-muted text-center"><a href="http://heyrod.com/">HeyRod.com</a></div><div class="col-md-4 text-muted text-right">Copyright &copy; 1999 - 2015 Rodney Waldhoff.</div><br>&nbsp;</div></div><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/ugly.js"></script><script type="text/javascript" src="/js/highlight.min.js"></script><script type="text/javascript" src="/js/bootstrap.min.js"></script><script type="text/javascript">var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-34329491-1']);_gaq.push(['_trackPageview']);(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script><script type="text/javascript">window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create', 'UA-34329491-1', 'auto');ga('send', 'pageview');</script><script async src='//www.google-analytics.com/analytics.js'></script></body></html>